<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>图数据库的基本概念 | 技术随笔</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">图数据库的基本概念</h1><a id="logo" href="/.">技术随笔</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">图数据库的基本概念</h1><div class="post-meta">Jan 19, 2019<span> | </span><span class="category"><a href="/categories/foundation/">基础技术</a></span></div><div class="post-content"><h1 id="图数据库的基本概念"><a href="#图数据库的基本概念" class="headerlink" title="图数据库的基本概念"></a>图数据库的基本概念</h1><h1 id="图数据库"><a href="#图数据库" class="headerlink" title="图数据库"></a>图数据库</h1><p><a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank" rel="noopener">图数据库 中文Wiki</a></p>
<blockquote>
<p>图数据库也可称为面向/基于图的数据库，对应的英文是Graph database。图数据库的基本含义是以“图”这种数据结构存储和查询数据，不是存储图片的数据库。图数据库的基本存储单元为：节点、关系、属性。</p>
<p>图数据库使用图模型来操作数据。目前使用的图模型有3种，分别是属性图（Property Graph）、资源描述框架（RDF）三元组和超图（HyperGraph）。现在较为知名的图数据库主要是基于属性图，更确切得说是带标签的属性图（Labeled-Property Graph），当然标签不是必须的。</p>
</blockquote>
<p><a href="https://en.wikipedia.org/wiki/Graph_database" target="_blank" rel="noopener">Graph database 英文Wiki</a></p>
<blockquote>
<p>In computing, a graph database (GDB[1]) is a database that uses graph structures for semantic queries with nodes, edges and properties to represent and store data. A key concept of the system is the graph (or edge or relationship), which directly relates data items in the store a collection of nodes of data and edges representing the relationships between the nodes. </p>
</blockquote>
<h3 id="用图来表示图示例"><a href="#用图来表示图示例" class="headerlink" title="用图来表示图示例"></a>用图来表示图示例</h3><p><img src="https://pic2.zhimg.com/80/v2-220d8ca77ec0747f27da1a7b5c809635_hd.jpg" alt=""></p>
<h3 id="社交网络图示例"><a href="#社交网络图示例" class="headerlink" title="社交网络图示例"></a>社交网络图示例</h3><p><img src="https://pic1.zhimg.com/80/v2-9cb5a0a1a6310de5ddb6a62f8383b480_hd.jpg" alt=""></p>
<h3 id="图数据库的优点："><a href="#图数据库的优点：" class="headerlink" title="图数据库的优点："></a>图数据库的优点：</h3><ol>
<li><p>关系查询性能好<br>在一个包含100w人，每人约有50个朋友的社交网络中找到最大深度为5的朋友的朋友。下图为图数据库Neo4J和关系型数据库在寻找扩展朋友时的性能对比。<br><img src="https://pic2.zhimg.com/80/v2-5eee36e53f8128569b44c4f59cc6eba1_hd.jpg" alt=""></p>
</li>
<li><p>灵活扩展性好</p>
</li>
</ol>
<p>图天生就是灵活可扩展的，可以对已存在的图结构增加新的边、节点、标签和子图，但却不会破坏现有的查询和应用程序的功能。</p>
<ol>
<li>灵活高效的图查询语言</li>
</ol>
<p>在图数据库中使用专门的图查询语言比使用SQL更加高效。目前主流的图查询语言是Cypher和Gremlin。</p>
<h3 id="图数据库实现机制"><a href="#图数据库实现机制" class="headerlink" title="图数据库实现机制"></a>图数据库实现机制</h3><p>原生图存储和原生图处理，其中原生图存储指的是图数据库，比如Neo4J所使用的后端存储是专门为Neo4J这种图数据库定制和优化的，理论上说能更有利于发挥图数据库的性能。而非原生图存储指的是图数据库，比如JanusGraph使用通用的NoSQL数据库比如HBase来保存序列化后的图数据。</p>
<p>而原生图处理指的是利用了免索引邻接的图数据库。免索引邻接是指通过边关联的2个节点，其彼此指向是物理的，也就是通过边访问一个节点时，该边保存的就是目标节点在磁盘上的物理地址，这样就需要通过索引去找到目标节点，如果边很多的时候，对性能提升很有帮助。</p>
<h1 id="主流图数据库"><a href="#主流图数据库" class="headerlink" title="主流图数据库"></a>主流图数据库</h1><p><a href="https://db-engines.com/en/ranking/graph+dbms" target="_blank" rel="noopener">DB-Engines Ranking of Graph DBMS</a></p>
<p><img src="./graph_database_rank.png" alt=""></p>
<p>Neo4j占有绝对的优势，是当前业界分析知识图谱的主流数据库。</p>
<h2 id="几种图数据库"><a href="#几种图数据库" class="headerlink" title="几种图数据库"></a>几种图数据库</h2><p>目前图数据库领域Neo4j占据绝对的优势，但是Neo4j在具体使用中也存在一些性能方面的问题。<br>目前社区关注度比较高的几个框架，包括Neo4j，JanusGraph，OrientDB，ArangoDB，TigerGraph，Dgraph。</p>
<h3 id="Neo4j"><a href="#Neo4j" class="headerlink" title="Neo4j"></a><a href="https://neo4j.com/" target="_blank" rel="noopener">Neo4j</a></h3><p><img src="https://neo4j.com/wp-content/themes/neo4jweb/assets/images/neo4j-logo-2015.png" alt=""></p>
<p>Neo4j是目前使用最多的图数据库。其优点是使用起来较为简单，也提供了图上的遍历搜索算法，而且其出现的较早，文档也较为齐全。但是Neo4j 最大的缺陷在于并非是真正的分布式，当数据量超过单机的承载能力以后很难处理，不能存储一个很大的关系图（不支持分片）。同时对于超大节点的处理速度较慢。目前有很多图数据库的性能都优于Neo4j。</p>
<p>而且它是一个商业数据库，虽然有社区版，但是使用场景受限。</p>
<p>它的查询语言是Cypher：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">MATCH</span> (<span class="attribute">a</span>:Person &#123;<span class="attribute">name</span>:<span class="string">'Johan'</span>&#125;)<span class="selector-tag">-</span><span class="selector-attr">[:FOLLOWS]</span><span class="selector-tag">-</span>&gt;(b)<span class="selector-tag">-</span><span class="selector-attr">[:FOLLOWS]</span><span class="selector-tag">-</span>&gt;(c),        (a)<span class="selector-tag">-</span><span class="selector-attr">[:FOLLOWS]</span><span class="selector-tag">-</span>&gt;(c)  <span class="selector-tag">RETURN</span> <span class="selector-tag">b</span>, <span class="selector-tag">c</span></span><br></pre></td></tr></table></figure>
<h3 id="JanusGraph"><a href="#JanusGraph" class="headerlink" title="JanusGraph"></a><a href="http://janusgraph.org/" target="_blank" rel="noopener">JanusGraph</a></h3><p><img src="http://janusgraph.org/images/janusgraph.png" alt=""><br>JanusGraph可以为不断增大的数据和用户量提供了弹性和线性的扩展能力，通过数据多点分布和复制来提高性能和容错能力；支持ACID特性和最终一致性。与Neo4J不同，JanusGraph不是原生的图数据库，相反的，其将数据存储到通用的存储系统上，支持的后端存储包括：Apache Cassandra、Apache HBase、Google Cloud Bigtable和Oracle BerkeleyDB。其中BerkeleyDB一般只做例子演示用。</p>
<p>JanusGraph依托于Apache社区构建了完整的图数据库和图计算能力，通过跟Apache中其他组件相配合，提供了一整套完整的图计算生态系统。其中就包括了Apache TinkerPop所提供的图查询语言Gremlin。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">g</span><span class="selector-class">.V</span>()<span class="selector-class">.has</span>(<span class="string">'User'</span>,<span class="string">'name'</span>,<span class="string">'Johan'</span>)<span class="selector-class">.out</span>(<span class="string">'FOLLOWS'</span>)<span class="selector-class">.as</span>(<span class="string">'b'</span>)<span class="selector-class">.out</span>(<span class="string">'FOLLOWS'</span>)<span class="selector-class">.as</span>(<span class="string">'c'</span>)<span class="selector-class">.in</span>(<span class="string">'FOLLOWS'</span>)<span class="selector-class">.has</span>(<span class="string">'User'</span>,<span class="string">'name'</span>,<span class="string">'Johan'</span>)<span class="selector-class">.select</span>(<span class="string">'b'</span>,<span class="string">'c'</span>)<span class="selector-class">.valueMap</span>()</span><br></pre></td></tr></table></figure>
<h3 id="OrientDB"><a href="#OrientDB" class="headerlink" title="OrientDB"></a>OrientDB</h3><p>OrientDB是与Neo4j一样，都是原生的图数据库（区别于在关系型数据库上封装一层算法的非原生图数据库）。OrientDB不仅可以用于做图数据库，它还支持多种模态（文档，key-values，纯文本数据等）好处是可以避免在同一个应用里使用多种数据库。其易用性与Neo4j相差不多，但在使用过程中的坑比较多（网上的评价）。</p>
<h3 id="ArangoDB"><a href="#ArangoDB" class="headerlink" title="ArangoDB"></a>ArangoDB</h3><p>ArangoDB是一个多模态的图数据库，支持分布式存储。其易用性应该与OrientDB和Neo4j差不多，其官网上的性能评测显示在插入及查找邻居节点的任务上比OrientDB和Neo4j要好。</p>
<h3 id="TigerGraph"><a href="#TigerGraph" class="headerlink" title="TigerGraph"></a>TigerGraph</h3><p>TigerGraph是一个 创业公司推出的一款图数据库，是首个原生并行图系统，号称是世界上最快的，最具可拓展性的图数据库。在性能上应该会比Neo4j有较大提升。目前还没有开源，文档也不是很多。</p>
<h3 id="Dgraph"><a href="#Dgraph" class="headerlink" title="Dgraph"></a>Dgraph</h3><p>DGraph 是可扩展的，分布式的，低延迟的图数据库（2017年正式发布），DGraph 的目标是提供 Google 生产水平的规模和吞吐量，在超过TB的结构数据里，为用户提供足够低延迟的实时查询。目前github上项目的star数有5000+，与Neo4j（2007年发布）相当，目前文档相对较少，但是社区比较活跃。</p>
<p>在这个专题中，尝试了Neo4j和JanusGraph两种图数据库。</p>
<h1 id="图数据库和图计算引擎的关系"><a href="#图数据库和图计算引擎的关系" class="headerlink" title="图数据库和图计算引擎的关系"></a>图数据库和图计算引擎的关系</h1><h3 id="图数据库-1"><a href="#图数据库-1" class="headerlink" title="图数据库"></a>图数据库</h3><p>图数据库是图数据库管理系统的简称，使用图形化的模型进行查询的数据库，通过节点、边和属性等方式来表示和存储数据，支持增删改查（CRUD）等操作。<br>图数据库一般用于OLTP系统中，提供在线事务处理能力。</p>
<h3 id="图计算引擎"><a href="#图计算引擎" class="headerlink" title="图计算引擎"></a>图计算引擎</h3><p>与图数据库对应的是图计算引擎，一般用于OLAP系统中，提供基于图的大数据分析能力。</p>
<p>主流的图数据库系统基本同时提供了图数据库和图计算引擎。</p>
<h1 id="图数据库的常见应用"><a href="#图数据库的常见应用" class="headerlink" title="图数据库的常见应用"></a>图数据库的常见应用</h1><h2 id="社交网络应用"><a href="#社交网络应用" class="headerlink" title="社交网络应用"></a>社交网络应用</h2><p>社交是人与人之间的连接，以图数据模型为内在的图数据库天生适用于明显的以联系为中心的领域。在社交网络中使用图数据库可以方便得识别人/群组和他们交流的事物之间的直接或间接的联系，使用户能够高效地对其他人或事物进行打分、评论、发现彼此存在的关系和共同关系的事情。可以更加直观得了解社交网络中人与人之间如何互动、如何关联、如何以群组的形式来做事情或选择。</p>
<h2 id="实时推荐"><a href="#实时推荐" class="headerlink" title="实时推荐"></a>实时推荐</h2><p>基于关系进行推荐。</p>
<h2 id="地理空间管理"><a href="#地理空间管理" class="headerlink" title="地理空间管理"></a>地理空间管理</h2><p>通信、物流、旅游已经路由计算相关领域的地理空间应用经常会使用图数据库。</p>
<p>比如快递送货路径</p>
<p><img src="https://pic4.zhimg.com/80/v2-0ee7e7af150b04f3bfb3917298f292d3_hd.jpg" alt=""></p>
<h2 id="知识图谱"><a href="#知识图谱" class="headerlink" title="知识图谱"></a>知识图谱</h2><p>实体与实体之间的关系，适合用图来表示</p>
<h2 id="主数据管理（Master-Data-Managerment）"><a href="#主数据管理（Master-Data-Managerment）" class="headerlink" title="主数据管理（Master Data Managerment）"></a>主数据管理（Master Data Managerment）</h2><p>在企业或组织中，主数据管理(MDM)包括的数据涉及用户、客户、产品、供应商、部门、区域、站点、成本中心和业务单元等。</p>
<h2 id="授权和访问控制"><a href="#授权和访问控制" class="headerlink" title="授权和访问控制"></a>授权和访问控制</h2><p>图数据库可以存储那些复杂的、高度关联的、跨越数十亿参与者和资源的访问控制结构。</p>
<p><img src="https://pic1.zhimg.com/80/v2-bd04ca783c00561d1cce1d056d7b4754_hd.jpg" alt=""></p>
<hr>
<h1 id="专题文章"><a href="#专题文章" class="headerlink" title="专题文章"></a>专题文章</h1><p><a href="/graph_db_0">图数据库 </a></p>
<p><a href="/graph_db_1">1、图数据库的基本概念</a></p>
<p><a href="/graph_db_2">2、Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</a></p>
<p><a href="/graph_db_3">3、Neo4j的Java API</a></p>
<p><a href="/graph_db_4">4、JanusGraph的使用: 安装，Gremlin，数据管理，导入导出，前端HTML</a></p>
<p><a href="/graph_db_5">5、Gremlin的Java API</a></p>
<p><a href="/graph_db_6">6、D3展示图</a></p>
</div><div class="tags"><a href="/tags/graph-db/">graph_db</a></div><div class="post-nav"><a class="pre" href="/graph_db_2.html">Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</a><a class="next" href="/graph_db_0.html">图数据库</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.codeessay.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/code-snippet/">代码片段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/foundation/">基础技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/architecture/">架构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">框架学习</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/pandas/" style="font-size: 15px;">pandas</a> <a href="/tags/Django-Python/" style="font-size: 15px;">Django, Python</a> <a href="/tags/架构设计/" style="font-size: 15px;">架构设计</a> <a href="/tags/graph-db/" style="font-size: 15px;">graph_db</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/JHipster-SpringMVC/" style="font-size: 15px;">JHipster, SpringMVC</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/recommend/" style="font-size: 15px;">recommend</a> <a href="/tags/基础技术/" style="font-size: 15px;">基础技术</a> <a href="/tags/scrapy/" style="font-size: 15px;">scrapy</a> <a href="/tags/site-search/" style="font-size: 15px;">site_search</a> <a href="/tags/sklearn/" style="font-size: 15px;">sklearn</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/graph_db_3.html">Neo4j的Java和Python API</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_2.html">Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_1.html">图数据库的基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_0.html">图数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_5.html">Gremlin的Java API</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_6.html">6、D3展示图</a></li><li class="post-list-item"><a class="post-list-link" href="/scrapy_1.html">1、系统架构，调度机制，排重机制，Pipeline，线程，爬虫扩张和限制，数据存储</a></li><li class="post-list-item"><a class="post-list-link" href="/spark_0.html">Spark数据处理和机器学习</a></li><li class="post-list-item"><a class="post-list-link" href="/sklearn_8.html">8、在Java程序中使用sklearn模型</a></li><li class="post-list-item"><a class="post-list-link" href="/sklearn_5.html">5、聚类</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">技术随笔 沪ICP备18016395号-2.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>