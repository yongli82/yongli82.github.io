<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类 | 技术随笔</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</h1><a id="logo" href="/.">技术随笔</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</h1><div class="post-meta">Jan 19, 2019<span> | </span><span class="category"><a href="/categories/foundation/">基础技术</a></span></div><div class="post-content"><h1 id="Neo4j的使用：安装，-Cypher，-数据管理，导入导出，-前端Html，聚类"><a href="#Neo4j的使用：安装，-Cypher，-数据管理，导入导出，-前端Html，聚类" class="headerlink" title="Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类"></a>Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</h1><h2 id="Neo4j介绍"><a href="#Neo4j介绍" class="headerlink" title="Neo4j介绍"></a>Neo4j介绍</h2><p>Neo4j是一个高性能的NOSQL图形数据库，它将结构化数据存储在网络上而不是表中。它是一个嵌入式的、基于磁盘的、具备完全的事务特性的Java持久化引擎，但是它将结构化数据存储在网络（从数学角度叫做图）上而不是表中。Neo4j也可以被看作是一个高性能的图引擎，该引擎具有成熟数据库的所有特性。程序员工作在一个面向对象的、灵活的网络结构下，而不是严格、静态的表中。但是他们可以享受到具备完全的事务特性、企业级的数据库的所有好处。 Neo4j因其嵌入式、高性能、轻量级等优势，越来越受到关注。</p>
<p>图数据库有巨大用途，它跟不同领域的很多问题都有关联。最常用的图论算法包括各种类型的最短路径计算、测地线（Geodesic Path）、集中度测量（如PageRank、特征向量集中度、亲密度、关系度、HITS等）。</p>
<h2 id="Neo4j安装"><a href="#Neo4j安装" class="headerlink" title="Neo4j安装"></a>Neo4j安装</h2><h3 id="在Ubuntu上安装Neo4j"><a href="#在Ubuntu上安装Neo4j" class="headerlink" title="在Ubuntu上安装Neo4j"></a>在Ubuntu上安装Neo4j</h3><h4 id="前置条件："><a href="#前置条件：" class="headerlink" title="前置条件："></a>前置条件：</h4><p>Java8</p>
<h4 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h4><p>1.下载安装</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wget -O - http<span class="variable">s:</span>//debian.neo4j.org/neotechnology.gpg.key | sudo apt-key <span class="built_in">add</span> -</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'deb http://debian.neo4j.org/repo stable/'</span> &gt;/tmp/neo4j.<span class="keyword">list</span></span><br><span class="line"></span><br><span class="line">mv /tmp/neo4j.<span class="keyword">list</span> /etc/apt/sources.<span class="keyword">list</span>.d</span><br><span class="line"></span><br><span class="line">apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line"></span><br><span class="line">apt-<span class="built_in">get</span> install neo4j</span><br></pre></td></tr></table></figure>
<p>2.修改配置文件<code>/etc/neo4j/neo4j.conf</code>，放开IP限制</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> # With<span class="built_in"> default </span>configuration Neo4j only accepts local connections.</span><br><span class="line"><span class="comment"># To accept non-local connections, uncomment this line:</span></span><br><span class="line">dbms.connectors.<span class="attribute">default_listen_address</span>=0.0.0.0</span><br></pre></td></tr></table></figure>
<p> 3.重启</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service <span class="symbol">neo4</span>j restart</span><br></pre></td></tr></table></figure>
<p>4.验证：</p>
<p>访问 <code>http://server_ip:7474/browser/</code></p>
<p><img src="./neo4j/neo4j1.png" alt="image"></p>
<p>默认用户名 <code>neo4j</code>, 默认密码 <code>neo4j</code>，<br>登录要求修改密码。</p>
<p><img src="./neo4j/neo4j2.png" alt="image"></p>
<p>5.运行电影关系示例</p>
<p>neo4j自带电影关系示例，可以运行来获取一个感性认识</p>
<p><img src="./neo4j/neo4j3.png" alt="image"></p>
<p><img src="./neo4j/neo4j4.png" alt="image"></p>
<p><img src="./neo4j/neo4j5.png" alt="image"></p>
<p>以某个节点(“Keanu Reeves”)为中心绘图</p>
<p><code>MATCH (a {name: &quot;Keanu Reeves&quot;})-[:ACTED_IN]-&gt;(m)&lt;-[:DIRECTED]-(d) RETURN a,m,d LIMIT 10</code></p>
<p><img src="./neo4j/neo4j6.png" alt="image"></p>
<h2 id="Cypher查询"><a href="#Cypher查询" class="headerlink" title="Cypher查询"></a>Cypher查询</h2><p><a href="https://neo4j.com/docs/cypher-manual/3.5/" target="_blank" rel="noopener">官方文档</a></p>
<blockquote>
<p>Cypher is a declarative graph query language that allows for expressive and efficient querying and updating of the graph. It is designed to be suitable for both developers and operations professionals. Cypher is designed to be simple, yet powerful; highly complicated database queries can be easily expressed, enabling you to focus on your domain, instead of getting lost in database access.</p>
<p>Cypher is inspired by a number of different approaches and builds on established practices for expressive querying. Many of the keywords, such as WHERE and ORDER BY, are inspired by SQL. Pattern matching borrows expression approaches from SPARQL. Some of the list semantics are borrowed from languages such as Haskell and Python. Cypher’s constructs, based on English prose and neat iconography, make queries easy both to write, and to read.</p>
</blockquote>
<p>Cypher是Neo4j的高效图查询DSL，简单易懂，用于数据查询和管理。</p>
<p>一个查询示例:</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MATCH (user)-[:friend]-&gt;(follower)</span><br><span class="line">WHERE user.<span class="keyword">name</span> <span class="keyword">IN</span> [<span class="string">'Joe'</span>, <span class="string">'John'</span>, <span class="string">'Sara'</span>, <span class="string">'Maria'</span>, <span class="string">'Steve'</span>] <span class="keyword">AND</span> follower.<span class="keyword">name</span> =~ <span class="string">'S.*'</span></span><br><span class="line">RETURN user.<span class="keyword">name</span>, follower.<span class="keyword">name</span></span><br></pre></td></tr></table></figure>
<p>结果示例</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+---------------------------+</span></span><br><span class="line">| user.name | follower.name |</span><br><span class="line"><span class="code">+---------------------------+</span></span><br><span class="line">| "Joe"     | "Steve"       |</span><br><span class="line">| "John"    | "Sara"        |</span><br><span class="line"><span class="code">+---------------------------+</span></span><br><span class="line">2 rows</span><br></pre></td></tr></table></figure>
<p>常用Cypher语句:</p>
<ul>
<li>查询 <code>MATCH</code> <code>WHERE</code> <code>RETURN</code> <code>WITH</code> <code>ORDER BY</code> <code>LIMIT</code> </li>
<li>增加 <code>CREATE</code> <code>SET</code></li>
<li>更新 <code>MERGE</code></li>
<li>删除 <code>DELETE</code> <code>REMOVE</code></li>
<li>统计 <code>sum()</code> <code>avg()</code> <code>count()</code> </li>
</ul>
<h2 id="数据管理"><a href="#数据管理" class="headerlink" title="数据管理"></a>数据管理</h2><h3 id="省份和城市"><a href="#省份和城市" class="headerlink" title="省份和城市"></a>省份和城市</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">CREATE</span>(中国<span class="selector-pseudo">:Country</span>&#123;<span class="attribute">title</span>:<span class="string">'中国'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(上海<span class="selector-pseudo">:City</span>&#123;<span class="attribute">title</span>:<span class="string">'上海市'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(<span class="selector-pseudo">:City</span>&#123;<span class="attribute">title</span>:<span class="string">'北京市'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(北京<span class="selector-pseudo">:City</span>&#123;<span class="attribute">title</span>:<span class="string">'北京市'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(北京<span class="selector-pseudo">:City</span>&#123;<span class="attribute">title</span>:<span class="string">'北京市'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(四川<span class="selector-pseudo">:Province</span>&#123;<span class="attribute">title</span>:<span class="string">'四川省'</span>&#125;)</span><br><span class="line"><span class="selector-tag">CREATE</span>(成都<span class="selector-pseudo">:City</span>&#123;<span class="attribute">title</span>:<span class="string">'成都市'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">CREATE</span>(上海)<span class="selector-tag">-</span><span class="selector-attr">[:OF]</span><span class="selector-tag">-</span>&gt;(中国)</span><br><span class="line"><span class="selector-tag">CREATE</span>(北京)<span class="selector-tag">-</span><span class="selector-attr">[:OF]</span><span class="selector-tag">-</span>&gt;(中国)</span><br><span class="line"><span class="selector-tag">CREATE</span>(成都)<span class="selector-tag">-</span><span class="selector-attr">[:OF]</span><span class="selector-tag">-</span>&gt;(四川)<span class="selector-tag">-</span><span class="selector-attr">[:OF]</span><span class="selector-tag">-</span>&gt;(中国)</span><br></pre></td></tr></table></figure>
<p>属性名称不需要用引号</p>
<p>不同会话的变量不共享</p>
<p>在新会话增加关联，要先把原来的节点MATCH出来</p>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a)-[:OF]-&gt;(b) RETURN <span class="selector-tag">a</span>,<span class="selector-tag">b</span> LIMIT <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p><img src="./neo4j/neo4j7.png" alt="image"></p>
<p>还可以指定关系层数</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">MATCH</span> (<span class="selector-tag">a</span>)<span class="selector-tag">-</span><span class="selector-attr">[*1..4]</span><span class="selector-tag">-</span>&gt;(<span class="selector-tag">b</span><span class="selector-pseudo">:Country</span>&#123;<span class="attribute">title</span>:<span class="string">'中国'</span>&#125;) <span class="selector-tag">RETURN</span> <span class="selector-tag">a</span>,<span class="selector-tag">b</span></span><br></pre></td></tr></table></figure>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">match</span> (<span class="built_in">n</span>) detach delete <span class="built_in">n</span></span><br></pre></td></tr></table></figure>
<p>删除指定节点和它的关系</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MATCH</span> (<span class="built_in">n</span>) where id(<span class="built_in">n</span>) = <span class="number">196</span> DETACH DELETE <span class="built_in">n</span></span><br></pre></td></tr></table></figure>
<h3 id="创建技能和它们之间的关系，并更新出现次数"><a href="#创建技能和它们之间的关系，并更新出现次数" class="headerlink" title="创建技能和它们之间的关系，并更新出现次数"></a>创建技能和它们之间的关系，并更新出现次数</h3><p>创建技能节点</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MERGE</span> (v:SKILL &#123;name: <span class="string">'Java'</span>&#125;) <span class="keyword">on</span> <span class="keyword">create</span> <span class="keyword">SET</span> v.<span class="built_in">count</span> = <span class="number">1</span> <span class="keyword">on</span> match <span class="keyword">SET</span> v.<span class="built_in">count</span> = v.<span class="built_in">count</span> + <span class="number">1</span> <span class="keyword">return</span> v</span><br><span class="line"></span><br><span class="line"><span class="keyword">MERGE</span> (v:SKILL &#123;name: <span class="string">'Spring'</span>&#125;) <span class="keyword">on</span> <span class="keyword">create</span> <span class="keyword">SET</span> v.<span class="built_in">count</span> = <span class="number">1</span> <span class="keyword">on</span> match <span class="keyword">SET</span> v.<span class="built_in">count</span> = v.<span class="built_in">count</span> + <span class="number">1</span> <span class="keyword">return</span> v</span><br></pre></td></tr></table></figure>
<p>创建和更新关系</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MATCH (source:<span class="built_in">SKILL</span> &#123;<span class="built_in">name</span>: <span class="string">'Java'</span>&#125;)</span><br><span class="line"> MATCH (dest:<span class="built_in">SKILL</span> &#123;<span class="built_in">name</span>: <span class="string">'Spring'</span>&#125;) </span><br><span class="line"> MERGE (source)-[edge:LINE]-&gt;(dest) </span><br><span class="line">  on create <span class="built_in">SET</span> edge.<span class="built_in">count</span> = <span class="number">1</span> </span><br><span class="line">  on match <span class="built_in">SET</span> edge.<span class="built_in">count</span> = edge.<span class="built_in">count</span> + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>查询</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (a)-[v]-&gt;(b) RETURN <span class="selector-tag">a</span>,v,<span class="selector-tag">b</span> LIMIT <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>按链接强度和关联节点计数，返回Top N关联节点</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH (<span class="selector-tag">a</span>:SKILL &#123;name: <span class="string">"机器学习"</span>&#125;)-[r]-&gt;(<span class="selector-tag">b</span>:SKILL)  RETURN <span class="selector-tag">a</span>,r,<span class="selector-tag">b</span> ORDER BY r<span class="selector-class">.count</span> desc,<span class="selector-tag">b</span><span class="selector-class">.count</span> desc LIMIT <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>找出有最多连结数的TopN节点</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MATCH (<span class="keyword">a</span>:SKILL)  </span><br><span class="line">WITH <span class="keyword">a</span>, SIZE((<span class="keyword">a</span>)-[]-&gt;()) <span class="keyword">as</span> r_size </span><br><span class="line">ORDER BY r_size desc </span><br><span class="line"><span class="literal">RETURN</span> <span class="keyword">a</span>, r_size LIMIT <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>前缀匹配查询,可用于Suggest，最多连结的排前面</p>
<p>参考 <a href="https://neo4j.com/docs/cypher-manual/current/clauses/where/" target="_blank" rel="noopener">https://neo4j.com/docs/cypher-manual/current/clauses/where/</a></p>
<p>STARTS WITH和ENDS WITH是大小写敏感</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MATCH (<span class="selector-tag">a</span>:SKILL) </span><br><span class="line">WHERE <span class="selector-tag">a</span><span class="selector-class">.name</span> STARTS WITH <span class="string">'ja'</span>  </span><br><span class="line">WITH <span class="selector-tag">a</span>, SIZE((a)-[]-&gt;()) as r_size </span><br><span class="line">ORDER BY r_size desc return <span class="selector-tag">a</span>, r_size </span><br><span class="line">LIMIT <span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>可以用正则表达式忽略大小写</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MATCH (<span class="selector-tag">a</span>:SKILL) </span><br><span class="line">WHERE <span class="selector-tag">a</span><span class="selector-class">.name</span> =~ <span class="string">'(?i)j.*'</span> </span><br><span class="line">WITH <span class="selector-tag">a</span>, SIZE((a)-[]-&gt;()) as r_size </span><br><span class="line">ORDER BY SIZE(<span class="selector-tag">a</span>.name) asc, r_size desc </span><br><span class="line">return <span class="selector-tag">a</span>, r_size LIMIT <span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>清洗异常数据节点</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">match</span> (<span class="selector-tag">n</span><span class="selector-pseudo">:SKILL</span> &#123;<span class="attribute">name</span>: <span class="string">"n"</span>&#125;) <span class="selector-tag">detach</span> <span class="selector-tag">delete</span> <span class="selector-tag">n</span></span><br><span class="line"><span class="selector-tag">match</span> (<span class="selector-tag">n</span><span class="selector-pseudo">:SKILL</span> &#123;<span class="attribute">name</span>: <span class="string">"r"</span>&#125;) <span class="selector-tag">detach</span> <span class="selector-tag">delete</span> <span class="selector-tag">n</span></span><br><span class="line"><span class="selector-tag">match</span> (<span class="selector-tag">n</span><span class="selector-pseudo">:SKILL</span> &#123;<span class="attribute">name</span>: <span class="string">"n1"</span>&#125;) <span class="selector-tag">detach</span> <span class="selector-tag">delete</span> <span class="selector-tag">n</span></span><br></pre></td></tr></table></figure>
<p>添加查询索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> <span class="keyword">ON</span> :SKILL (<span class="keyword">name</span>)</span><br></pre></td></tr></table></figure>
<p>统计总节点数量和边的数量</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MATCH</span> (<span class="built_in">n</span>) return <span class="built_in">COUNT</span>(<span class="built_in">n</span>);</span><br><span class="line"><span class="built_in">MATCH</span> ()-[r]-&gt;() return <span class="built_in">COUNT</span>(r);</span><br></pre></td></tr></table></figure>
<h2 id="数据导入和导出"><a href="#数据导入和导出" class="headerlink" title="数据导入和导出"></a>数据导入和导出</h2><p>有几种方式，比如Cypher-shell和apoc存储过程，从使用来看apoc更加灵活好用。</p>
<h3 id="cypher-shell使用"><a href="#cypher-shell使用" class="headerlink" title="cypher-shell使用"></a>cypher-shell使用</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># cypher-<span class="keyword">shell</span> -<span class="keyword">u</span> neo4j -<span class="keyword">p</span> password</span><br><span class="line">Connected <span class="keyword">to</span> Neo4j <span class="number">3.4</span>.<span class="number">9</span> at bol<span class="variable">t:</span>//localhos<span class="variable">t:7687</span> <span class="keyword">as</span> user neo4j.</span><br><span class="line">Type :<span class="keyword">help</span> <span class="keyword">for</span> <span class="keyword">a</span> <span class="keyword">list</span> of available commands <span class="built_in">or</span> :<span class="keyword">exit</span> <span class="keyword">to</span> <span class="keyword">exit</span> the <span class="keyword">shell</span>.</span><br><span class="line">Note that Cypher queries must end with <span class="keyword">a</span> semicolon.</span><br><span class="line">neo4j&gt;:<span class="keyword">help</span></span><br><span class="line"></span><br><span class="line">Available <span class="keyword">command</span><span class="variable">s:</span></span><br><span class="line">  :begin    Open <span class="keyword">a</span> transaction</span><br><span class="line">  :commit   Commit the currently <span class="keyword">open</span> transaction</span><br><span class="line">  :<span class="keyword">exit</span>     Exit the logger</span><br><span class="line">  :<span class="keyword">help</span>     Show this <span class="keyword">help</span> message</span><br><span class="line">  :<span class="keyword">history</span>  <span class="keyword">Print</span> <span class="keyword">a</span> <span class="keyword">list</span> of the <span class="keyword">last</span> commands executed</span><br><span class="line">  :param    Set the value of <span class="keyword">a</span> query parameter</span><br><span class="line">  :params   Prints <span class="keyword">all</span> currently <span class="keyword">set</span> query parameters <span class="built_in">and</span> their <span class="built_in">values</span></span><br><span class="line">  :rollback Rollback the currently <span class="keyword">open</span> transaction</span><br><span class="line"></span><br><span class="line">For <span class="keyword">help</span> <span class="keyword">on</span> <span class="keyword">a</span> specific <span class="keyword">command</span> <span class="built_in">type</span>:</span><br><span class="line">    :<span class="keyword">help</span> <span class="keyword">command</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">For <span class="keyword">help</span> <span class="keyword">on</span> cypher please visi<span class="variable">t:</span></span><br><span class="line">    http<span class="variable">s:</span>//neo4j.<span class="keyword">com</span>/docs/developer-manual/current/cypher/</span><br></pre></td></tr></table></figure>
<p><a href="https://neo4j.com/docs/operations-manual/current/configuration/file-locations/" target="_blank" rel="noopener">不同系统下文件路径</a></p>
<p><a href="https://neo4j.com/docs/operations-manual/current/tools/cypher-shell/" target="_blank" rel="noopener">cypher-shell参考文档</a></p>
<h3 id="导出和导入数据"><a href="#导出和导入数据" class="headerlink" title="导出和导入数据"></a>导出和导入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">12.7. Dump and <span class="keyword">load</span> <span class="keyword">databases</span></span><br><span class="line">This <span class="keyword">section</span> describes the dump <span class="keyword">and</span> <span class="keyword">load</span> commands <span class="keyword">of</span> Neo4j Admin.</span><br><span class="line"></span><br><span class="line">A Neo4j <span class="keyword">database</span> can be dumped <span class="keyword">and</span> loaded <span class="keyword">using</span> the <span class="keyword">following</span> commands:</span><br><span class="line"></span><br><span class="line">neo4j-<span class="keyword">admin</span> dump <span class="comment">--database=&lt;database&gt; --to=&lt;destination-path&gt;</span></span><br><span class="line"></span><br><span class="line">neo4j-<span class="keyword">admin</span> <span class="keyword">load</span> <span class="comment">--from=&lt;archive-path&gt; --database=&lt;database&gt; [--force]</span></span><br><span class="line"></span><br><span class="line">Limitations</span><br><span class="line"></span><br><span class="line">The <span class="keyword">database</span> should be <span class="keyword">shutdown</span> <span class="keyword">before</span> running the dump <span class="keyword">and</span> <span class="keyword">load</span> commands.</span><br><span class="line">neo4j-<span class="keyword">admin</span> must be invoked <span class="keyword">as</span> the neo4j <span class="keyword">user</span> <span class="keyword">in</span> <span class="keyword">order</span> <span class="keyword">to</span> ensure the appropriate <span class="keyword">file</span> permissions.</span><br></pre></td></tr></table></figure>
<p><a href="https://neo4j.com/docs/operations-manual/current/tutorial/import-tool/" target="_blank" rel="noopener">导入CSV数据</a></p>
<h4 id="外部工具-neo4j-shell-tools"><a href="#外部工具-neo4j-shell-tools" class="headerlink" title="外部工具 neo4j-shell-tools"></a>外部工具 neo4j-shell-tools</h4><p>地址 <a href="https://github.com/jexp/neo4j-shell-tools" target="_blank" rel="noopener">https://github.com/jexp/neo4j-shell-tools</a></p>
<h4 id="导出和导入-Cypher脚本"><a href="#导出和导入-Cypher脚本" class="headerlink" title="导出和导入 Cypher脚本"></a>导出和导入 Cypher脚本</h4><p><a href="https://neo4j.com/developer/kb/export-sub-graph-to-cypher-and-import/" target="_blank" rel="noopener">https://neo4j.com/developer/kb/export-sub-graph-to-cypher-and-import/</a></p>
<h3 id="安装APOC"><a href="#安装APOC" class="headerlink" title="安装APOC"></a>安装APOC</h3><p><a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures" target="_blank" rel="noopener">https://github.com/neo4j-contrib/neo4j-apoc-procedures</a></p>
<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p><a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/3.4.0.4" target="_blank" rel="noopener">https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/3.4.0.4</a> 下的插件jar包，存放在$NEO$J_HOME/plugins目录下 </p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /var/<span class="class"><span class="keyword">lib</span>/<span class="title">neo4j</span>/<span class="title">plugins</span></span></span><br><span class="line">wget <span class="symbol">https:</span>/<span class="regexp">/github.com/neo</span>4j-contrib/neo4j-apoc-procedures/releases/download/<span class="number">3.4</span>.<span class="number">0.4</span>/apoc-<span class="number">3.4</span>.<span class="number">0.4</span>-all.jar</span><br></pre></td></tr></table></figure>
<h3 id="修改安全配置"><a href="#修改安全配置" class="headerlink" title="修改安全配置"></a>修改安全配置</h3><p>/etc/neo4j/neoj4.conf</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dbms.security.procedures.<span class="attribute">unrestricted</span>=apoc.*</span><br><span class="line">dbms.security.procedures.<span class="attribute">whitelist</span>=apoc.*</span><br><span class="line">apoc.export.file.<span class="attribute">enabled</span>=<span class="literal">true</span></span><br><span class="line">apoc.import.file.<span class="attribute">enabled</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">neo4j</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在Cypher命令界面，输入</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">RETURN</span> apoc.<span class="built_in">version</span>()</span><br></pre></td></tr></table></figure>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CALL</span> apoc.help(<span class="string">"apoc"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="导出Cypher文件"><a href="#导出Cypher文件" class="headerlink" title="导出Cypher文件"></a>导出Cypher文件</h3><p><a href="https://neo4j.com/developer/kb/export-sub-graph-to-cypher-and-import/" target="_blank" rel="noopener">https://neo4j.com/developer/kb/export-sub-graph-to-cypher-and-import/</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// exports the whole database incl. indexes as cypher statements to the provided file</span><br><span class="line"><span class="keyword">CALL</span> apoc.export.cypher.all(<span class="string">'/tmp/neo4j_export.cypher'</span>,&#123;<span class="keyword">format</span>:<span class="string">'cypher-shell'</span>&#125;)</span><br><span class="line"></span><br><span class="line">// exports given nodes <span class="keyword">and</span> relationships incl. <span class="keyword">indexes</span> <span class="keyword">as</span> cypher statements <span class="keyword">to</span> the provided <span class="keyword">file</span></span><br><span class="line"><span class="keyword">MATCH</span> <span class="keyword">path</span> = (p1:Person)-[r:KNOWS]-&gt;(p2:Person)</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">collect</span>(p1)+<span class="keyword">collect</span>(p2) <span class="keyword">as</span> export_nodes, <span class="keyword">collect</span>(r) <span class="keyword">as</span> export_rels</span><br><span class="line"><span class="keyword">CALL</span> apoc.export.cypher.data(export_nodes,export_rels,<span class="string">'/tmp/export.cypher'</span>,&#123;<span class="keyword">format</span>:<span class="string">'cypher-shell'</span>&#125;)</span><br><span class="line">YIELD <span class="keyword">file</span>, <span class="keyword">source</span>, <span class="keyword">format</span>, nodes, relationships, properties, <span class="keyword">time</span></span><br><span class="line"><span class="keyword">RETURN</span> nodes, relationships, <span class="keyword">time</span>;</span><br><span class="line"></span><br><span class="line">// exports given graph object incl. indexes as cypher statements to the provided file</span><br><span class="line">...</span><br><span class="line"><span class="keyword">CALL</span> apoc.graph.fromPaths([paths],<span class="string">'export_graph'</span>,&#123;&#125;) YIELD graph</span><br><span class="line"><span class="keyword">CALL</span> apoc.export.cypher.graph(graph,<span class="string">'/tmp/export.cypher'</span>,&#123;<span class="keyword">format</span>:<span class="string">'cypher-shell'</span>&#125;) YIELD <span class="keyword">time</span></span><br><span class="line"><span class="keyword">RETURN</span> <span class="keyword">time</span>;</span><br><span class="line"></span><br><span class="line">// exports nodes and relationships from the cypher statement incl. indexes as cypher statements to the provided file</span><br><span class="line"><span class="keyword">CALL</span> apoc.export.cypher.query(</span><br><span class="line"><span class="string">'MATCH (p1:Person)-[r:KNOWS]-&gt;(p2:Person) RETURN *'</span>,</span><br><span class="line"><span class="string">'/tmp/export.cypher'</span>,&#123;<span class="keyword">format</span>:<span class="string">'cypher-shell'</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>注意导出的路径，需要有权限</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">➜  /data head neo4j_export.cypher</span><br><span class="line">:begin</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">3</span>, `name`:<span class="string">"RocksDB"</span>, `UNIQUE IMPORT ID`:<span class="number">7424</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">4</span>, `name`:<span class="string">"PhoneGap"</span>, `UNIQUE IMPORT ID`:<span class="number">7425</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">8</span>, `name`:<span class="string">"SeaJS"</span>, `UNIQUE IMPORT ID`:<span class="number">7426</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">10</span>, `name`:<span class="string">"Sketch"</span>, `UNIQUE IMPORT ID`:<span class="number">7427</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">2</span>, `name`:<span class="string">"Congress"</span>, `UNIQUE IMPORT ID`:<span class="number">7428</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">6</span>, `name`:<span class="string">"托福"</span>, `UNIQUE IMPORT ID`:<span class="number">7429</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">9</span>, `name`:<span class="string">"RMI"</span>, `UNIQUE IMPORT ID`:<span class="number">7430</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">3</span>, `name`:<span class="string">"异步通信"</span>, `UNIQUE IMPORT ID`:<span class="number">7431</span>&#125;);</span><br><span class="line">CREATE (:`SKILL`:`UNIQUE IMPORT LABEL` &#123;`count`:<span class="number">6</span>, `name`:<span class="string">"开发环境搭建"</span>, `UNIQUE IMPORT ID`:<span class="number">7432</span>&#125;);</span><br><span class="line">➜  /data tail neo4j_export.cypher</span><br><span class="line">MATCH (n1:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">9338</span>&#125;), (n2:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">8718</span>&#125;) CREATE (n1)-[r:`l` &#123;`count`:<span class="number">1</span>&#125;]-&gt;(n2);</span><br><span class="line">MATCH (n1:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">8774</span>&#125;), (n2:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">8669</span>&#125;) CREATE (n1)-[r:`l` &#123;`count`:<span class="number">1</span>&#125;]-&gt;(n2);</span><br><span class="line">MATCH (n1:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">8669</span>&#125;), (n2:`UNIQUE IMPORT LABEL`&#123;`UNIQUE IMPORT ID`:<span class="number">8774</span>&#125;) CREATE (n1)-[r:`l` &#123;`count`:<span class="number">1</span>&#125;]-&gt;(n2);</span><br><span class="line">:commit</span><br><span class="line">:begin</span><br><span class="line">MATCH (n:`UNIQUE IMPORT LABEL`)  WITH n LIMIT <span class="number">20000</span> REMOVE n:`UNIQUE IMPORT LABEL` REMOVE n.`UNIQUE IMPORT ID`;</span><br><span class="line">:commit</span><br><span class="line">:begin</span><br><span class="line">DROP CONSTRAINT ON (node:`UNIQUE IMPORT LABEL`) ASSERT node.`UNIQUE IMPORT ID` IS UNIQUE;</span><br><span class="line">:commit</span><br></pre></td></tr></table></figure>
<h4 id="导出数据的函数"><a href="#导出数据的函数" class="headerlink" title="导出数据的函数"></a>导出数据的函数</h4><p>还可以导出csv文件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">apoc</span><span class="selector-class">.export</span><span class="selector-class">.csv</span>.*</span><br><span class="line"><span class="selector-tag">There</span> <span class="selector-tag">are</span> 4 <span class="selector-tag">functions</span> <span class="selector-tag">documented</span> <span class="selector-tag">on</span> <span class="selector-tag">the</span> <span class="selector-tag">GitHub</span><span class="selector-class">.IO</span> <span class="selector-tag">page</span>:</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">apoc</span><span class="selector-class">.export</span><span class="selector-class">.csv</span><span class="selector-class">.query</span>(<span class="selector-tag">query</span>, <span class="selector-tag">file</span>, <span class="selector-tag">config</span>)</span><br><span class="line"><span class="selector-tag">apoc</span><span class="selector-class">.export</span><span class="selector-class">.csv</span><span class="selector-class">.all</span>(<span class="selector-tag">file</span>, <span class="selector-tag">config</span>)</span><br><span class="line"><span class="selector-tag">apoc</span><span class="selector-class">.export</span><span class="selector-class">.csv</span><span class="selector-class">.data</span>(<span class="selector-tag">nodes</span>, <span class="selector-tag">rels</span>, <span class="selector-tag">file</span>, <span class="selector-tag">config</span>)</span><br><span class="line"><span class="selector-tag">apoc</span><span class="selector-class">.export</span><span class="selector-class">.csv</span><span class="selector-class">.graph</span>(<span class="selector-tag">graph</span>, <span class="selector-tag">file</span>, <span class="selector-tag">config</span>)</span><br></pre></td></tr></table></figure>
<p>Config neo4j.conf<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apoc<span class="selector-class">.export</span><span class="selector-class">.file</span><span class="selector-class">.enabled</span>=true</span><br><span class="line">dbms<span class="selector-class">.security</span><span class="selector-class">.procedures</span><span class="selector-class">.unrestricted</span>=apoc<span class="selector-class">.export</span><span class="selector-class">.csv</span>.*</span><br></pre></td></tr></table></figure></p>
<p>Export all</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tab delimiting the 'all' query</span></span><br><span class="line">CALL apoc<span class="selector-class">.export</span><span class="selector-class">.csv</span><span class="selector-class">.all</span>(</span><br><span class="line">   <span class="string">"/tmp/exportedGraph.csv"</span>, </span><br><span class="line">   &#123;d:<span class="string">'\t'</span>&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>注意导出文件需要neo4j程序有写权限，一般在<code>/tmp</code>目录下，导出后再移动</p>
<p>Sample Data</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  /<span class="class"><span class="keyword">data</span> mv /tmp/exportedGraph.csv ./</span></span><br><span class="line">➜  /<span class="class"><span class="keyword">data</span> head exportedGraph.csv</span></span><br><span class="line"><span class="string">"_id"</span>	<span class="string">"_labels"</span>	<span class="string">"partition"</span>	<span class="string">"betweenness"</span>	<span class="string">"pagerank"</span>	<span class="string">"community"</span>	<span class="string">"count"</span>	<span class="string">"name"</span>	<span class="string">"_start"</span>	<span class="string">"_end"</span>	<span class="string">"_type"</span>	<span class="string">"count"</span>	<span class="string">"weight"</span></span><br><span class="line"><span class="string">"7424"</span>	<span class="string">":SKILL"</span>	<span class="string">"0"</span>	<span class="string">"6.5170218717306465"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"0"</span>	<span class="string">"3"</span>	<span class="string">"RocksDB"</span></span><br><span class="line"><span class="string">"7425"</span>	<span class="string">":SKILL"</span>	<span class="string">"1"</span>	<span class="string">"18.55605820642601"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"1"</span>	<span class="string">"4"</span>	<span class="string">"PhoneGap"</span></span><br><span class="line"><span class="string">"7426"</span>	<span class="string">":SKILL"</span>	<span class="string">"2"</span>	<span class="string">"16.54238384132427"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"2"</span>	<span class="string">"8"</span>	<span class="string">"SeaJS"</span></span><br><span class="line"><span class="string">"7427"</span>	<span class="string">":SKILL"</span>	<span class="string">"3"</span>	<span class="string">"50.162859929046505"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"3"</span>	<span class="string">"10"</span>	<span class="string">"Sketch"</span></span><br><span class="line"><span class="string">"7428"</span>	<span class="string">":SKILL"</span>	<span class="string">"4"</span>	<span class="string">"0"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"4"</span>	<span class="string">"2"</span>	<span class="string">"Congress"</span></span><br><span class="line"><span class="string">"7429"</span>	<span class="string">":SKILL"</span>	<span class="string">"5"</span>	<span class="string">"14.427055056859594"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"5"</span>	<span class="string">"6"</span>	<span class="string">"托福"</span></span><br><span class="line"><span class="string">"7430"</span>	<span class="string">":SKILL"</span>	<span class="string">"6"</span>	<span class="string">"11.859333186417583"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"6"</span>	<span class="string">"9"</span>	<span class="string">"RMI"</span></span><br><span class="line"><span class="string">"7431"</span>	<span class="string">":SKILL"</span>	<span class="string">"7"</span>	<span class="string">"1.5257444466409238"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"7"</span>	<span class="string">"3"</span>	<span class="string">"异步通信"</span></span><br><span class="line"><span class="string">"7432"</span>	<span class="string">":SKILL"</span>	<span class="string">"8"</span>	<span class="string">"1.1948662975866118"</span>	<span class="string">"0.15000000000000002"</span>	<span class="string">"8"</span>	<span class="string">"6"</span>	<span class="string">"开发环境搭建"</span></span><br><span class="line">➜  /<span class="class"><span class="keyword">data</span> tail exportedGraph.csv</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"8861"</span>	<span class="string">"15453"</span>	<span class="string">"belongTo"</span>	<span class="string">"1550"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"8861"</span>	<span class="string">"15434"</span>	<span class="string">"belongTo"</span>	<span class="string">"714"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15345"</span>	<span class="string">"belongTo"</span>	<span class="string">"5234"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15346"</span>	<span class="string">"belongTo"</span>	<span class="string">"775"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15440"</span>	<span class="string">"belongTo"</span>	<span class="string">"233"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15349"</span>	<span class="string">"belongTo"</span>	<span class="string">"107148"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15350"</span>	<span class="string">"belongTo"</span>	<span class="string">"39"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15456"</span>	<span class="string">"belongTo"</span>	<span class="string">"4"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15351"</span>	<span class="string">"belongTo"</span>	<span class="string">"1557"</span>	<span class="string">""</span></span><br><span class="line">truetruetruetruetruetruetruetrue<span class="string">"9080"</span>	<span class="string">"15432"</span>	<span class="string">"belongTo"</span>	<span class="string">"139"</span>	<span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>导入数据</p>
<p>csv可以用load_csv函数<br>Cypher命令文件可以直接执行</p>
<h2 id="Neo4j前端展示"><a href="#Neo4j前端展示" class="headerlink" title="Neo4j前端展示"></a>Neo4j前端展示</h2><p>Neo4j提供了<a href="https://github.com/neo4j-contrib/neovis.js/" target="_blank" rel="noopener"><code>neovis.js</code></a>来做前端展示</p>
<p><code>neovis.js</code>的使用比较简单，用一个html文件就可以展示Cypher查询结果</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>DataViz<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-id">#viz</span> &#123;</span></span><br><span class="line"><span class="undefined">                width: 1600px;</span></span><br><span class="line"><span class="undefined">                height: 1000px;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://rawgit.com/neo4j-contrib/neovis.js/master/dist/neovis.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="function"><span class="keyword">function</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> config = &#123;</span></span><br><span class="line"><span class="actionscript">                container_id: <span class="string">"viz"</span>,</span></span><br><span class="line"><span class="actionscript">                server_url: <span class="string">"bolt://july:7687"</span>,</span></span><br><span class="line"><span class="actionscript">                server_user: <span class="string">"neo4j"</span>,</span></span><br><span class="line"><span class="actionscript">                server_password: <span class="string">"Yaongli@2018"</span>,</span></span><br><span class="line"><span class="undefined">                labels: &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="string">"SKILL"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">                        caption: <span class="string">"name"</span>,</span></span><br><span class="line"><span class="actionscript">                        size: <span class="string">"pagerank"</span>,</span></span><br><span class="line"><span class="actionscript">                        community: <span class="string">"community"</span></span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                relationships: &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="string">"l"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">                        caption: <span class="literal">false</span>,</span></span><br><span class="line"><span class="actionscript">                        thickness: <span class="string">"weight"</span></span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="actionscript">                initial_cypher: <span class="string">"MATCH p=(n:SKILL)-[r:l]-&gt;(m:SKILL) where r.weight &gt; 0.05 and n.count &gt;= m.count RETURN p"</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> viz = <span class="keyword">new</span> NeoVis.default(config);</span></span><br><span class="line"><span class="undefined">            viz.render();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"draw()"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"viz"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对数据做聚类分析预处理, 计算<code>community</code>和<code>pagerank</code>。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">预处理</span><br><span class="line"></span><br><span class="line">match (n)-[<span class="string">r:</span>l]-&gt;(m) where r.count &lt; <span class="number">50</span> delete r</span><br><span class="line"></span><br><span class="line">match (<span class="string">n:</span>SKILL)-[<span class="string">r:</span>l]-&gt;(<span class="string">m:</span>SKILL) with n,r,m SET r.weight=<span class="number">1.0</span> * r.count/(n.count + m.count)</span><br><span class="line"></span><br><span class="line">CALL algo.pageRank(<span class="string">'SKILL'</span>, <span class="string">'l'</span>,&#123;</span><br><span class="line"><span class="symbol">  iterations:</span><span class="number">20</span>, <span class="string">dampingFactor:</span><span class="number">0.85</span>, <span class="string">write:</span> <span class="literal">true</span>, <span class="string">writeProperty:</span><span class="string">"pagerank"</span>, <span class="string">weightProperty:</span> <span class="string">"weight"</span></span><br><span class="line">&#125;)</span><br><span class="line">YIELD nodes, iterations, loadMillis, computeMillis, writeMillis, dampingFactor, write, writeProperty</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CALL algo.labelPropagation(<span class="string">"SKILL"</span>, <span class="string">"l"</span>, <span class="string">'OUTGOING'</span>, &#123;<span class="string">iterations:</span><span class="number">6</span>,</span><br><span class="line"><span class="symbol">    weightProperty:</span><span class="string">'weight'</span>, <span class="string">partitionProperty:</span><span class="string">'partition'</span>, <span class="string">write:</span><span class="literal">true</span>, <span class="string">concurrency:</span><span class="number">1</span>&#125;)</span><br><span class="line">YIELD nodes, iterations, didConverge, loadMillis, computeMillis, writeMillis, write, weightProperty, partitionProperty</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CALL algo.louvain(<span class="string">'SKILL'</span>, <span class="string">'l'</span>,</span><br><span class="line">  &#123; <span class="string">weightProperty:</span><span class="string">'weight'</span>, <span class="string">write:</span><span class="literal">true</span>, <span class="string">writeProperty:</span><span class="string">'community'</span>&#125;)</span><br><span class="line">YIELD nodes, communityCount, iterations, loadMillis, computeMillis, writeMillis;</span><br></pre></td></tr></table></figure>
<p>调整CQL中的r.weight权重，可以查看不同连接强度的图。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH p=(n:SKILL)-[r:l]-&gt;(m:SKILL) where r<span class="selector-class">.weight</span> &gt; <span class="number">0.05</span> and n<span class="selector-class">.count</span> &gt;= m<span class="selector-class">.count</span> RETURN p</span><br></pre></td></tr></table></figure>
<p><img src="./neo4j/neovis1.png" alt=""></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH p=(n:SKILL)-[r:l]-&gt;(m:SKILL) where r<span class="selector-class">.weight</span> &gt; <span class="number">0.1</span> and n<span class="selector-class">.count</span> &gt;= m<span class="selector-class">.count</span> RETURN p</span><br></pre></td></tr></table></figure>
<p><img src="./neo4j/neovis2.png" alt=""></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MATCH p=(n:SKILL)-[r:l]-&gt;(m:SKILL) where r<span class="selector-class">.weight</span> &gt; <span class="number">0.02</span> and n<span class="selector-class">.count</span> &gt;= m<span class="selector-class">.count</span> RETURN p</span><br></pre></td></tr></table></figure>
<p><img src="./neo4j/neovis3.png" alt=""></p>
<h2 id="Neo4j聚类分析"><a href="#Neo4j聚类分析" class="headerlink" title="Neo4j聚类分析"></a>Neo4j聚类分析</h2><p>在<a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures" target="_blank" rel="noopener">APOC</a>集合中，有一系列的聚类算法函数，可以直接使用，比如之前绘图用的<code>algo.pageRank</code>和<code>algo.labelPropagation</code>等算法。</p>
<p><a href="https://github.com/neo4j-contrib/neo4j-graph-algorithms" target="_blank" rel="noopener">neo4j-graph-algorithms</a></p>
<h3 id="介数中心性（Betweenness-Centrality）"><a href="#介数中心性（Betweenness-Centrality）" class="headerlink" title="介数中心性（Betweenness Centrality）"></a>介数中心性（Betweenness Centrality）</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MATCH (c:SKILL)</span><br><span class="line">WITH collect(c) AS characters</span><br><span class="line">CALL apoc.algo.betweenness(['l'], characters, 'BOTH') YIELD <span class="keyword">node</span><span class="title">, score</span></span><br><span class="line">SET <span class="keyword">node</span>.<span class="title">betweenness</span> = score</span><br><span class="line">RETURN <span class="keyword">node</span>.<span class="title">name</span> AS name, score <span class="keyword">ORDER</span> <span class="title">BY</span> score DESC</span><br><span class="line">LIMIT <span class="number">100</span></span><br></pre></td></tr></table></figure>
<h3 id="社区发现"><a href="#社区发现" class="headerlink" title="社区发现"></a>社区发现</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> algo.louvain(<span class="string">'SKILL'</span>, <span class="string">'l'</span>,</span><br><span class="line">  &#123;<span class="keyword">write</span>:<span class="keyword">true</span>, writeProperty:<span class="string">'community'</span>&#125;)</span><br><span class="line">YIELD nodes, communityCount, iterations, loadMillis, computeMillis, writeMillis;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>nodes</th>
<th>communityCount</th>
<th>iterations</th>
<th>loadMillis</th>
<th>computeMillis</th>
<th>writeMillis</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>1470</td>
<td>8</td>
<td>2</td>
<td>432</td>
<td>820</td>
<td>442</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="PageRank"><a href="#PageRank" class="headerlink" title="PageRank"></a>PageRank</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CALL algo.pageRank(<span class="string">'Page'</span>, <span class="string">'LINKS'</span>,&#123;</span><br><span class="line"><span class="symbol">  iterations:</span><span class="number">20</span>, <span class="string">dampingFactor:</span><span class="number">0.85</span>, <span class="string">write:</span> <span class="literal">true</span>, <span class="string">writeProperty:</span><span class="string">"pagerank"</span>, <span class="string">weightProperty:</span> <span class="string">"count"</span></span><br><span class="line">&#125;)</span><br><span class="line">YIELD nodes, iterations, loadMillis, computeMillis, writeMillis, dampingFactor, write, writeProperty</span><br></pre></td></tr></table></figure>
<h3 id="标签传播"><a href="#标签传播" class="headerlink" title="标签传播"></a>标签传播</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CALL algo.labelPropagation(<span class="string">"SKILL"</span>, <span class="string">"l"</span>, <span class="string">'OUTGOING'</span>, &#123;<span class="string">iterations:</span><span class="number">6</span>,</span><br><span class="line"><span class="symbol">    weightProperty:</span><span class="string">'count'</span>, <span class="string">partitionProperty:</span><span class="string">'partition'</span>, <span class="string">write:</span><span class="literal">true</span>, <span class="string">concurrency:</span><span class="number">4</span>&#125;)</span><br><span class="line">YIELD nodes, iterations, didConverge, loadMillis, computeMillis, writeMillis, write, weightProperty, partitionProperty</span><br></pre></td></tr></table></figure>
<p>参考 <a href="https://itimetraveler.github.io/2016/11/21/%E5%9F%BA%E4%BA%8E%E7%A4%BE%E5%8C%BA%E5%8F%91%E7%8E%B0%E7%AE%97%E6%B3%95%E5%92%8C%E5%9B%BE%E5%88%86%E6%9E%90Neo4j%E8%A7%A3%E8%AF%BB%E3%80%8A%E6%9D%83%E5%8A%9B%E7%9A%84%E6%B8%B8%E6%88%8F%E3%80%8B" target="_blank" rel="noopener">基于社区发现算法和图分析Neo4j解读 《权力的游戏》</a></p>
<hr>
<h1 id="专题文章"><a href="#专题文章" class="headerlink" title="专题文章"></a>专题文章</h1><p><a href="/graph_db_0">图数据库 </a></p>
<p><a href="/graph_db_1">1、图数据库的基本概念</a></p>
<p><a href="/graph_db_2">2、Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</a></p>
<p><a href="/graph_db_3">3、Neo4j的Java API</a></p>
<p><a href="/graph_db_4">4、JanusGraph的使用: 安装，Gremlin，数据管理，导入导出，前端HTML</a></p>
<p><a href="/graph_db_5">5、Gremlin的Java API</a></p>
<p><a href="/graph_db_6">6、D3展示图</a></p>
</div><div class="tags"><a href="/tags/graph-db/">graph_db</a></div><div class="post-nav"><a class="pre" href="/graph_db_3.html">Neo4j的Java和Python API</a><a class="next" href="/graph_db_1.html">图数据库的基本概念</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.codeessay.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/code-snippet/">代码片段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/foundation/">基础技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/architecture/">架构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/framework/">框架学习</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/pandas/" style="font-size: 15px;">pandas</a> <a href="/tags/Django-Python/" style="font-size: 15px;">Django, Python</a> <a href="/tags/架构设计/" style="font-size: 15px;">架构设计</a> <a href="/tags/graph-db/" style="font-size: 15px;">graph_db</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/JHipster-SpringMVC/" style="font-size: 15px;">JHipster, SpringMVC</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/recommend/" style="font-size: 15px;">recommend</a> <a href="/tags/基础技术/" style="font-size: 15px;">基础技术</a> <a href="/tags/scrapy/" style="font-size: 15px;">scrapy</a> <a href="/tags/site-search/" style="font-size: 15px;">site_search</a> <a href="/tags/sklearn/" style="font-size: 15px;">sklearn</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/graph_db_3.html">Neo4j的Java和Python API</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_2.html">Neo4j的使用：安装， Cypher， 数据管理，导入导出， 前端Html，聚类</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_1.html">图数据库的基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_0.html">图数据库</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_5.html">Gremlin的Java API</a></li><li class="post-list-item"><a class="post-list-link" href="/graph_db_6.html">6、D3展示图</a></li><li class="post-list-item"><a class="post-list-link" href="/scrapy_2.html">2、数据提取和保存：css选择器和xpath选择器； ajax api； headless浏览器</a></li><li class="post-list-item"><a class="post-list-link" href="/spark_0.html">Spark数据处理和机器学习</a></li><li class="post-list-item"><a class="post-list-link" href="/sklearn_8.html">8、在Java程序中使用sklearn模型</a></li><li class="post-list-item"><a class="post-list-link" href="/sklearn_7.html">7、模型保存和载入，在线更新</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">技术随笔.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>